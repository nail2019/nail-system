{"ast":null,"code":"import _classCallCheck from \"D:\\\\projects\\\\nails\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\projects\\\\nails\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\projects\\\\nails\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\projects\\\\nails\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\projects\\\\nails\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\projects\\\\nails\\\\client\\\\src\\\\pages\\\\signup\\\\steps\\\\step2\\\\index.js\";\nimport React from 'react';\nimport { Col, Button, Row, Container, Alert } from 'react-bootstrap';\n\nvar Step2 =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Step2, _React$Component);\n\n  function Step2() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Step2);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Step2)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      code: '',\n      isLoading: false,\n      listError: []\n    };\n\n    _this.simulateNetworkRequest = function () {\n      return new Promise(function (resolve) {\n        return setTimeout(resolve, 2000);\n      });\n    };\n\n    _this.handleOnChange = function (e) {\n      _this.setState({\n        code: e.target.value\n      });\n    };\n\n    _this.Continue = function () {\n      _this.setState({\n        isLoading: true\n      }, function () {\n        _this.simulateNetworkRequest().then(function () {\n          _this.verifySMS();\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Step2, [{\n    key: \"verifySMS\",\n    value: function verifySMS() {\n      var _this2 = this;\n\n      var listError = [];\n      var phone = \"84\".concat(this.props.phoneNumber);\n\n      if (this.state.code.length < 4) {\n        listError.push(\"sms code phải có 4 ký tự\");\n        this.setState({\n          listError: listError,\n          isLoading: false\n        });\n        return listError;\n      } else {\n        fetch('/api/account/verifySmsCode', {\n          method: \"POST\",\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            smsCode: this.state.code,\n            to: phone //nhận 1 props chứa phone number từ step 1 truyền vào\n\n          })\n        }).then(function (data) {\n          data.json().then(function (data) {\n            if (data.success === true) {\n              _this2.props.nextStep();\n            } else {\n              listError.push('Mã xác nhận không đúng');\n\n              _this2.setState({\n                listError: listError,\n                isLoading: false\n              });\n\n              return listError;\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.simulateNetworkRequest);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          phone = _this$state.phone,\n          isLoading = _this$state.isLoading,\n          listError = _this$state.listError;\n      return React.createElement(Container, {\n        className: \"box-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, listError.length > 0 ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, listError.map(function (item, index) {\n        return React.createElement(Alert, {\n          key: index + \"err\",\n          variant: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, item);\n      })) : null, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 12,\n        md: 12,\n        sx: 12,\n        className: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        style: {\n          userSelect: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"M\\xC3 X\\xC1C TH\\u1EF0C\"), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Nh\\u1EADp m\\xE3 x\\xE1c th\\u1EF1c\",\n        className: \"mr-3\",\n        autoFocus: true,\n        onChange: this.handleOnChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"warning\",\n        onClick: function onClick() {\n          return _this3.Continue(phone);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, isLoading ? \"Đang xác thực...\" : \"Tiếp tục\"))));\n    }\n  }]);\n\n  return Step2;\n}(React.Component);\n\nexport { Step2 as default };","map":{"version":3,"sources":["D:\\projects\\nails\\client\\src\\pages\\signup\\steps\\step2\\index.js"],"names":["React","Col","Button","Row","Container","Alert","Step2","state","code","isLoading","listError","simulateNetworkRequest","Promise","resolve","setTimeout","handleOnChange","e","setState","target","value","Continue","then","verifySMS","phone","props","phoneNumber","length","push","fetch","method","headers","body","JSON","stringify","smsCode","to","data","json","success","nextStep","clearTimeout","map","item","index","userSelect","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Col, Button, Row, Container, Alert } from 'react-bootstrap';\r\n\r\n\r\nexport default class Step2 extends React.Component {\r\n    state = {\r\n        code: '',\r\n        isLoading: false,\r\n        listError: []\r\n    }\r\n    simulateNetworkRequest = () => {\r\n        return new Promise(resolve => setTimeout(resolve, 2000));\r\n    }\r\n\r\n    handleOnChange = (e) => {\r\n        this.setState({\r\n            code: e.target.value\r\n        })\r\n    }\r\n    verifySMS() {\r\n        let listError = []\r\n        let phone = `84${this.props.phoneNumber}`\r\n        if (this.state.code.length < 4) {\r\n            listError.push(\"sms code phải có 4 ký tự\");\r\n            this.setState({ listError, isLoading: false })\r\n            return listError\r\n        }\r\n        else {\r\n            fetch('/api/account/verifySmsCode', {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    smsCode: this.state.code,\r\n                    to: phone //nhận 1 props chứa phone number từ step 1 truyền vào\r\n                })\r\n            }).then((data) => {\r\n                data.json()\r\n                    .then((data) => {\r\n                        if (data.success === true) {\r\n                            this.props.nextStep();\r\n                        }\r\n                        else {\r\n                            listError.push('Mã xác nhận không đúng')\r\n                            this.setState({ listError, isLoading: false })\r\n                            return listError\r\n                        }\r\n                    })\r\n            })\r\n        }\r\n    }\r\n    Continue = () => {\r\n        this.setState({ isLoading: true }, () => {\r\n            this.simulateNetworkRequest()\r\n                .then(() => {\r\n                    this.verifySMS();\r\n                })\r\n        })\r\n    }\r\n    componentWillUnmount() {\r\n        clearTimeout(this.simulateNetworkRequest)\r\n    }\r\n    render() {\r\n        let { phone, isLoading, listError } = this.state\r\n        return (\r\n            <Container className='box-content'>\r\n                {listError.length > 0\r\n                    ? <div>\r\n                        {listError.map((item, index) => {\r\n                            return <Alert key={index + \"err\"} variant=\"danger\">{item}</Alert>\r\n                        })}\r\n                    </div>\r\n                    : null}\r\n                <Row>\r\n                    <Col sm={12} md={12} sx={12} className=\"center\" >\r\n                        <b style={{ userSelect: 'none' }}>MÃ XÁC THỰC</b>\r\n                        <input type='text' placeholder='Nhập mã xác thực' className='mr-3' autoFocus onChange={this.handleOnChange} />\r\n                        <Button variant=\"warning\" onClick={() => this.Continue(phone)} >\r\n                            {isLoading ? \"Đang xác thực...\" : \"Tiếp tục\"}\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}